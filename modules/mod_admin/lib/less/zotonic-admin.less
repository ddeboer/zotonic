/* Specific styles for Zotonic admin
   ----------------------------------------------------------

@package:	Zotonic admin CSS

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
---------------------------------------------------------- */

// Lots of Love for LESS: http://mateuszkocz.github.io/3l/
#3L {@import "3L/3L";}


/* Variables
   --------------------------------------------------------- */
   
// units
@baseMargin: 15px;
@thumbImageWidth: 80px;
@thumbImageHeight: 60px;
@radiusBlockElement: 4px;
@radiusWidget: @radiusBlockElement;

// general colors
@backgroundColorLight: #eee;
@backgroundColorLighter: #f2f2f2;
@backgroundColorInteractive: #eee;
@borderColorMedium: #ddd;
@borderColorLight: #eee;
@textColorMedium: #666;
@textColorMuted: #999;

// used colors
@backgroundColorRowHover: @backgroundColorInteractive;
@textColorUnpublished: @textColorMuted;
@borderColorRow: @borderColorMedium;


/* Mixins
   --------------------------------------------------------- */

.gradient (@startColor: @backgroundColorLighter, @endColor: white) {
	background-color: @startColor;
	background: -webkit-gradient(linear, left top, left bottom, from(@startColor), to(@endColor));
	background: -webkit-linear-gradient(top, @startColor, @endColor);
	background: -moz-linear-gradient(top, @startColor, @endColor);
	background: -ms-linear-gradient(top, @startColor, @endColor);
	background: -o-linear-gradient(top, @startColor, @endColor);
}

.word_break() {
    -ms-word-break: break-all;
    word-break: break-all;

    // Non standard for webkit
     word-break: break-word;

    -webkit-hyphens: auto;
       -moz-hyphens: auto;
        -ms-hyphens: auto;
            hyphens: auto;
}

.white-border {
    border: 1px solid #fff;
}

/* bootstrap structure
   --------------------------------------------------------- */

body {
    
    div.admin-container {
        margin: @baseMargin;
        margin-top: 70px;
    }

    &.noframe > div.admin-container {
        background: transparent;
    }

    &.wait {
        cursor: wait;
        .btn {
            cursor: wait;
        }
    }
}

div.navbar-brand .zotonic-logo {
    padding-top: 2px;
}

hr {
    background-color: #ddd;
    border-top-color: #d0d0d0;
    margin: 10px 0;
    width: 100%;
}


// #00bef8, #069cd1

.navbar-right {
    margin-right: 0;
}

.navbar-nav>li>a {
    text-shadow: 0 1px 0 rgba(0,0,0,.25);
}
.navbar-brand>img {
    margin-top: -2px;
}

/* footer edit nav
   --------------------------------------------------------- */

#rsc-image {
    position: relative;
}
div.cropguide {
    position: absolute;
}
div.cropguide.horiz {
    border-top: 1px dotted rgba(255,255,255,0.7);
    border-bottom: 1px dotted rgba(0,0,0,0.7);
    height: 0;
    left: 0; right: 0;
}
div.cropguide.vert {
    border-left: 1px dotted rgba(255,255,255,0.7);
    border-right: 1px dotted rgba(0,0,0,0.7);
    width: 0;
    top: 0; bottom: 0;
}

/* footer edit nav
   --------------------------------------------------------- */

.navbar-fixed-save {
    z-index: 1000;
    opacity: 0;
    position: fixed;
    top: 44px;
    border-top-left-radius: 0;
    border-top-right-radius: 0;
    padding: 5px;
    -webkit-transition: opacity 0.5s ease-in-out;
    -moz-transition: opacity 0.5s ease-in-out;
    -o-transition: opacity 0.5s ease-in-out;
    transition: opacity 0.5s ease-in-out;
    min-height: inherit;
}
.navbar-fixed-save .navbar-inner {
    #3L > .border-radius(0 0 @radiusBlockElement @radiusBlockElement);
    padding: 0 4px 0 4px;
}
.scrolled .navbar-fixed-save {
    opacity: 1.0;
}
.navbar-fixed-save .control-group {
    margin: 0 20px 0;
}
.navbar.navbar-fixed-save .pull-right {
    float: right;
}
.navbar-fixed-save label {
    color: white;
    margin-left: 20px;
}
@media (max-width: 979px) {
    body > div.container-fluid {
        margin-top: 0;
    }
    .navbar-fixed-save {
        position: fixed;
        top: 0;
        right: 0;
        left: 0;
    }
}

/* widget
   --------------------------------------------------------- */

div.widget {
    @_sidePadding: 10px;
    @_verticalPadding: 9px;
    
    margin-bottom: 10px;
    border-bottom: none;
    #3L > .border-radius(@radiusWidget);
    #3L > .box-shadow(0 1px 1px rgba(0, 0, 0, 0.3));
    background-color: @backgroundColorLighter;
    
    div.widget-content {
        padding: @_verticalPadding @_sidePadding;
        
        & h1, & h2, & h3, & h4, & h5, & h6 {
            margin: @baseMargin 0;

            &:first-of-type {
                margin-top: 0;
            }
        }

        > :last-child {
            margin-bottom: 0;
        }
        
        .form-group:last-child {
            padding-bottom: @_verticalPadding;
            margin-bottom: 0;
        }

        &.nolang {
            > .form-group:first-child {
                padding-top: @_verticalPadding;
            }
        }

        .rsc-item {
            overflow: hidden;
            height: 64px;
            padding-bottom: 4px;
            border-bottom: 1px solid white;
            
            img {
                margin-right: 4px;
            }
        }
    }

    .widget-header,
    .widget-section-header {
        font-size: 13px;
        font-weight: normal;
        text-shadow: 0 1px 0 rgba(255,255,255,.5);
        color: @textColorMedium;
    }
    
    .widget-section-header {
        margin: 30px 0 15px 0;
    }
    
    .widget-header {
        margin: 0;
        padding: @_verticalPadding @_sidePadding;
        #3L > .border-radius(@radiusWidget @radiusWidget 0);
        .gradient(#e0e0e0, @backgroundColorLighter);
        
        .pull-right {
            margin: -2px;
        }
        i.pull-right.glyphicon {
            margin: 1px;
            font-size: 10px;
            color: #888;
            
            &.white {
                color: black;
                //text-shadow: 0 1px 0 rgba(0,0,0,.1);
                text-shadow: 0 1px 0 rgba(255,255,255,.5);
            }
        }
    }
    h5 {
        display: block;
        margin: 20px 0;
    }
    
    &.dark {
        background: #ddd;
        
        .widget-header {
            background: #ddd;
        }
    }
    
    .admin-button-help {
        @_size: 16px;
        display: block;
        float: right;
        width: @_size;
        height: @_size;
        background-color: #333;
        border-color: #fff;
        #3L > .border-radius(@_size/2);
    }
}

li {
    > div.widget {
        #3L > .border-radius(0 0 @radiusWidget @radiusWidget);
    }

    h3.widget-header {
        #3L > .border-radius(@radiusWidget @radiusWidget 0 0);
        #3L > .box-shadow(0 1px 1px rgba(0, 0, 0, 0.3));
    }
    
}

div.widget ul.nav-tabs li.active > a {
    .gradient(#eeeeee, #ffffff);
}


/* admin forms
   --------------------------------------------------------- */

div.admin-form {
    & :last-child {
        margin-bottom: 0;
    }
}

div.form-group {
    &.row {
        // Horizontal form
        > label.control-label {
            margin-top: 9px;
            text-align: right;
        }
    }

    span.error {
        display: none;
    }
    &.error span.error {
        display: inline;
    }
}


/* admin table
   --------------------------------------------------------- */

/* override table-striped */
.table-striped>tbody>tr:nth-child(odd) {
    background-color: #fff;
}

td.clickable,
tr.clickable td {
    cursor: pointer;
}

.table>thead>tr>th,
.table>tbody>tr>th,
.table>tfoot>tr>th,
.table>thead>tr>td,
.table>tbody>tr>td,
.table>tfoot>tr>td {
    border-top: 1px solid @borderColorMedium;
}
.table {
    border-bottom: 1px solid @borderColorMedium;
}

table.do_adminLinkedTable {
    td.view-link {
        padding: 0;
    }
    td a.view-link {
        display: block;
        padding: 8px;
        color: inherit;
        
        &:hover {
            text-decoration: none;
        }
    }
    .buttons {
        margin-top: -2px;
        margin-bottom: -2px;
    }
    h5, p {
        margin: 0;
    }
}

.table>thead>tr>th {
    border-width: 1px;
}
.table tbody tr.clickable td,
.table tbody tr.clickable th {
    #3L > .transition(all .1s ease-in-out);
}
.table tbody tr.clickable:hover td,
.table tbody tr.clickable:hover th {
    background-color: @backgroundColorRowHover;
}

table.table tr.unpublished td,
table.table tr.unpublished td a {
    color: @textColorUnpublished;
}

table.table tr.unpublished td a.btn-success {
    color: white;
}

img.thumb {
    padding: 0;
    #3L > .border-radius(0);
    #3L > .box-shadow(none);
//    &:extend(.white-border);
}

img.admin-list-dashboard {
    width: 32px;
    height: 24px;
    margin: -1px 3px 0 0;
//    &:extend(.white-border);
}
img.admin-list-overview {
    width: @thumbImageWidth;
    height: @thumbImageHeight;
//    &:extend(.white-border);
}

/* admin edit page
   -------------------------------------------------------------- */

#content-address table {
    margin-bottom: 0;
}

.widget h5 {
    margin-top: 18px;
}

.pull-right p.admin-chapeau {
    text-align: right;
}

p.admin-chapeau {
    color: @textColorMuted;
    margin: 0;

    a {
        color: @textColorMuted;
        text-decoration: underline;
    }
}

ul.media {
    margin: 0;

    > li {
        margin: 0 0 18px 3px;
        background: #fff;
        width: 25%;
        height: 230px;
        max-width: 200px;
        float: left;
        margin-left: 10px;
        position: relative;
        padding: 4px;
        border: 1px solid #ddd;
        #3L > .border-radius(@radiusBlockElement);
        -webkit-box-shadow: 0 0 4px rgba(0,0,0,.125);
        
        img {
            cursor: move;
            width: 100%;
        }
        .bottom {
            position: absolute;
            bottom: 0;
            left: 0; right: 0;
            padding: 2px;
            
            .caption {
                height: 22px;
                padding-left: 4px;
                line-height: 1.6;
                overflow: hidden;
                a {
                    word-break: break-all;
                    display: inline-block;
                    width: 85%;
                }
            }
        }
    }

    > li.ui-sortable-placeholder {
        background: #aaa;
        #3L > .border-radius(@radiusBlockElement);
    }
}

div.admin-header h2 {
    margin-top: 0;
    margin-bottom: 18px;
    color: #333;
}

div.admin-edit-media {
    display: inline-block;
    background: white;
    padding: 0;
    margin: 0 0 10px 0;
    &:extend(.white-border);
}

.ui-datepicker .ui-datepicker-header {
    height: 29px;
}

input.do_datepicker {
    width: 100px;
    display: inline;
}
input.do_timepicker {
    width: 70px;
    display: inline;
}

.do_menuedit {
    min-height:100px;
}

ul.tree-list {
    &.categories {
        padding-bottom: 40px;
    
        li.menu-item {
            span.category {
                display: none;
            }
        }
    }    
    li img.grippy {
        margin: -1px 3px 0 0;
    }
}

/* admin edit page - blocks
   -------------------------------------------------------------- */

ul.blocks {
    padding: 0;
    margin: 0;
}
ul.blocks > li {
    list-style-type: none;
    margin-left: 0;
}
ul.blocks > li > h3 {
    cursor: move;
}
ul.blocks > li > h3 > .icon-remove,
ul.blocks > li > h3 > .pull-right {
    cursor: pointer;
}
ul.blocks > li > h3 > .pull-right {
    margin-top: 6px;
}
ul.blocks > li > h3 > input {
    margin: 2px 0 3px 0;
    height: 24px;
    width: 120px;
    display: inline;
}
ul.blocks li.block .widget {
    padding-top: 4px;
    #3L > .border-radius(0 0 @radiusWidget @radiusWidget);
}
.block-add-block {
    margin-bottom: 12px;
}
.block-add-block .dropdown-menu {
    top: auto;
}

fieldset.block-name {
    margin-top: 8px;
}

h3.widget-header input.block-name {
    background: #ddd;
}
h3.widget-header input.block-name:focus {
    background: white;
}

ul.blocks .ui-sortable-placeholder {
    background: #aaa;
    #3L > .border-radius(@radiusBlockElement);
    visibility: visible !important;
}


/* Connections
   ---------------------------------------------------------- */
ul.connections-list {
    padding-bottom: 8px;
    min-height: 1em;

    &:empty {
        display: none;
    }
    
    li {
        position: relative;

        .btns {
            top: -2px;
        }
    }
}
a span.category {
    color: #bbb;
}
#unlink-undo-message div.alert {
    padding-right: 14px; /* right-aligned undo button in page connections */
}

/* .media-sorter .ui-sortable-placeholder, */
.connections-list .ui-sortable-placeholder {
    background: #aaa;
    #3L > .border-radius(@radiusBlockElement);
    visibility: visible !important;
}

.form-field-error {
    color: #B94A48;
}    
.z_validation_message {
    background-color: #F2DEDE;
    border-color: #EED3D7;
    color: #B94A48;
    margin-left: 9px;
    margin-bottom: 9px;
    display: inline-block;
    vertical-align: middle;
    padding: 5px 9px;
    #3L > .border-radius(@radiusBlockElement);
}

form.form-horizontal .z_validation_message {
    margin-bottom: 0;
}

ul.suggestions-list {
    margin: 0; padding: 0;
    list-style-type: none;
}
ul.suggestions-list li a {
    display: block;
    .gradient(#ffffff, #f5f5f5);

    border: 1px solid #E0E0E0;
    #3L > .border-radius(@radiusBlockElement);
    margin-bottom: -1px;
    padding: 2px 4px;
}

ul.suggestions-list li a .pull-right {
    color: @textColorMuted;
}

ul.suggestions-list li a:hover span.pull-right,
ul.suggestions-list li a:hover {
    color: #f5f5f5;
    background: #999;
    text-decoration: none;
}


#dialog-connect-results {
    @_gutter: 6px;
    
    max-height: 400px;
    overflow-y: scroll;
    padding: 10px 0;
    border-top: 1px solid @borderColorLight;
    
    // use smaller grid gutter
    .row {
        margin-left: -@_gutter;
        margin-right: -@_gutter;
    }
    [class*="col-"] {
        padding-left: @_gutter;
        padding-right: @_gutter;
    }
    
    .thumbnail {
        @_padding: 5px;
        @_contentPartMargin: 0.25em;
        @_contentHeight: @thumbImageHeight;
        @_heigth: @_contentHeight + 2 * @_padding + 2px; // add border
        @_sideMargin: 2 * @_padding;
        @_fontSize: 12px;
        @_lineHeight: 1.1em;
        
        min-height: @_heigth;
        max-height: @_heigth;
        overflow: hidden;    
        #3L > .border-radius(2px);
        #3L > .box-shadow(none);
        cursor: pointer;
        margin-bottom: 2 * @_gutter;
        padding: @_padding;
        font-size: @_fontSize;
        line-height: @_lineHeight;
        
        &:hover {
            background-color: @backgroundColorRowHover;
        }
        
        &.z-image-thumbnail {
            h5, h6, p {
                margin-left: @thumbImageWidth + @_sideMargin;
            }
        }
        
        img {
            padding: 0;
            #3L > .border-radius(0);
            #3L > .box-shadow(none);
            margin: 0 @_sideMargin 0 0;
        }

        h5, h6, p {
            font-size: @_fontSize;
            line-height: @_lineHeight;
            font-weight: normal;
            margin: 0 0 @_contentPartMargin 0;
        }
        h5, h6 {
            .word_break;
        }
        h5 {
            font-weight: bold;
            max-height: @_lineHeight;
            width: 1000px; // wide enough to write on 1 line
        }
        h6 {
            text-transform: lowercase;
            color: @textColorMuted;
        }
        p {
            max-height: 2 * @_lineHeight;
            overflow: hidden;
        }
    }
}

/* small image in admin edit */
.admin-leader {
    float: left;
    margin-right: 12px;
    width: 64px;
    height: 48px;
    cursor: pointer;
//    &:extend(.white-border);
}

span.leader {
    background: @backgroundColorLight;
}


/* growl message */
.notice-wrap {
	position: fixed;
	top: 60px;
	right: 20px;
	width: 300px;
	z-index: 9999;
}


/* tinyMce stuff
   --------------------------------------------------------- */

table.mceLayout, textarea.tinyMCE {
    width: 100% !important;
}

.mceToolbar td a span.mce_zmore {
	background: url(/lib/images/toolbars.gif) !important;
}

#zmedia-props-form [class*="span"] {
    margin-bottom: 20px;
}

#zmedia-props-form .control-label {
    font-weight: bold;
}

.z-tinymce-media-left {
    border: 1px solid @borderColorLight;
}

.dialog .z-tinymce-media-options label {
	float: none;
	width: auto;
}

.z-tinymce-media-options p {
	margin: 0;
}

.wp_themeSkin .mceStatusbar div {
    width: 600px;
    overflow: hidden;
}

div.widget-content .mce-tinymce.mce-container {
    border: 0;
    margin: 0 -4px -8px -4px; /* makes it fill the whole widget-content area */
}

/* sets tinyMCE font size in admin */
div.widget-content .mce-container, div.widget-content .mce-container *, div.widget-content .mce-widget, div.widget-content .mce-widget *, div.widget-content .mce-reset {
    font-size: 13px;
}


/* maps
   -------------------------------------------------------------- */

.map-wrapper {
	height: 300px;
	width: 610px;
	border: 3px solid #ddd;
	margin: 0 0 9px 0;
	#3L > .border-radius(6px);
}

/* Some extra rtl definitions */

input[type="text"].rtl, textarea.rtl {
    font-size: 150%;
}

body[dir=rtl] label {
    float: right;
    text-align: right;
}

/* admin logon */
.admin-logon {
    margin: auto;
    margin-top: 150px;
    max-width: 480px;
    width: 100%;
    
    form {
        padding: 16px;
    }

    div.buttons p {
        margin-top: 9px;
    }

    div.buttons {
        margin-top: 30px;
    }

    .widget-header {
        font-size: 17px;
        text-shadow: 0 1px 0 rgba(255,255,255,.5);
        .gradient(#ddd, #eee);
        padding: 8px;
        padding-top: 12px;
        color: #333;
    }
}

#logon_error {
    padding: 16px;
    display: none;
}
.logon_error #logon_error {
    display: block;
}
#logon_error h2, #logon_error h3 {
    font-size: 1.1em;
    line-height: 1.2em;
}
#logon_error p {
    margin-bottom: 1em;
}


/* icon status
   --------------------------------------------------------- */
   
@_colorStatusOff: #D7D7D7;   
@_colorStatusOk: #00D100;
@_colorStatusError: #ED4A00;
@_colorStatusWarning: #FFBD00;
@_colorBorderStarting: #E2F800;
@_colorBorderNeutral: #777;
@_colorBorderLight: #fff;   

.led-color(@color) {
    @_glow_size: 7px;
    &:before {
        .gradient(
            mix(@_colorBorderNeutral, @color, 50%), 
            mix(@_colorBorderLight, @color, 50%)
        );
    }
    &:after {
        background: @color;
        box-shadow: 
            inset 0 -@_glow_size @_glow_size rgba(100,100,100,0.1),
            inset 0 @_glow_size @_glow_size rgba(255,255,255,0.3);
    }
}

span.icon_status {
    @_size: 14px;
    @_inner_size: @_size - 2;
    width: @_size;
    height: @_size;
    display: inline-block;
    position: relative;
    margin-top: 3px;
    
    &:before {
        // background as gradient border
        position: absolute;
        top: 0px;
        left: 0px;
        border-radius: 50%;
        width: @_size;
        height: @_size;
        content: " ";
        background-color: #ddd;
        z-index: 0;
    }
    &:after {
        // colored status
        position: absolute;
        top: 1px;
        left: 1px;
        border-radius: 50%;
        width: @_inner_size;
        height: @_inner_size;
        content: " ";
        background-color: #eee;
        z-index: 1;
    }
    
    &.icon_status_running,
    &.icon_status_ok {
        .led-color(@_colorStatusOk);
    }
    
    &.icon_status_error {
        .led-color(@_colorStatusError);
    }
    
    &.icon_status_warning,
    &.icon_status_retrying {
        .led-color(@_colorStatusWarning);
    }
    
    &.icon_status_starting {
        .led-color(@_colorBorderStarting);
    }
}

/* sidebar
   --------------------------------------------------------- */

#sidebar-date-range .tab-content {
    overflow: visible;
}

/* scroll - keep the save buttons into view
   --------------------------------------------------------- */

#sidebar-publish-page .widget-content {
    display: block;
}
#sidebar-publish-page h3.widget-header i {
    display: none;
}


/* modal - fix for tab content getting scrollbars inside modal
   --------------------------------------------------------- */
@media (min-width: 720px) {
    .modal-dialog {
        width: 700px;
    }
}

div.modal {
    div.tab-content {
        overflow: visible;
    }
    .nav.nav-pills {
        margin-bottom: @baseMargin;
    }
}

#dialog-connect-results {
    margin-top: @baseMargin;
    overflow-x: hidden;
    overflow-y: auto;
}

textarea, input {
    &.form-field-error {
        background: #ffeeee;
    }
}

/* other bootstrap overrides
   --------------------------------------------------------- */

.text-muted {
    color: @textColorMuted;
}
.btn {
    &.disabled {
        .glyphicon {
            opacity: .6;
        }
    }
    .glyphicon {
        top: 3px;
    }
    &.btn-xs {
        .glyphicon {
            top: 2px;
        }
    }
}
.well {
    padding: 15px;
    
    .btn + .btn {
        margin-left: 4px;
    }
}
.alert {
    padding: 10px;
    
    .close {
        margin-top: -4px;
    }
}
